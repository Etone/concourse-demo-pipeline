resources:
- name: code
  type: git
  icon: github
  source:
    uri: https://github.com/Etone/concourse-demo-v7.git
    branch: main

jobs:
- name: print 
  plan:
  - get: code
  - set_pipeline: self
    file: code/pipeline.yaml
    vars:
      git-token: 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
  - load_var: config
    file: code/message.json
  - task: hello-world
    file: code/tasks/hello-world.yaml
    params:
      message: ((.:config.message))